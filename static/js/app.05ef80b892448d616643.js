webpackJsonp([1],{"0//T":function(t,e){},"2hbW":function(t,e){},"3hi2":function(t,e){},"F+FH":function(t,e){},"I6+s":function(t,e){},LvxR:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),s=i.n(n),a=i("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var l=i("VU/8")({name:"App"},o,!1,function(t){i("0//T")},null,null).exports,r=i("/ocq"),c=i("Dd8w"),u=i.n(c),d=i("zL8q"),p=i.n(d),m=i("mtWM"),h=i.n(m),f=i("mw3O"),g=i.n(f),v={name:"Login",data:function(){return{loginForm:{account:"",password:"",tenant:"ZZHS",token:""},loading:!1,messagesStr:"登 录",rules:{account:[{required:!0,message:"账号不能为空",trigger:"blur"},{max:20,message:"账号长度最长20位",trigger:"blur"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"}]}}},mounted:function(){this.clearAccount()},methods:{login:function(t){var e=this;this.$refs[t].validate(function(t){e.loading=!0,e.messagesStr="登录中...";var i=new URLSearchParams;if(i.append("account",e.loginForm.account),i.append("password",e.$md5(e.loginForm.password)),i.append("tenant",e.loginForm.tenant),!t)return!1;e.$axios.post("/user/login",i).then(function(t){e.loading=!1,e.messagesStr="登 录",200==t.data.code?(e.token=t.data.data,e.$notify({type:"success",message:"欢迎你,"+e.loginForm.account+"!",duration:3e3}),e.$router.push({path:"/home"}),sessionStorage.setItem("account",e.loginForm.account),e.$emit("state")):404==t.data.code?e.$message({type:"error",message:"该账户不存在",showClose:!0}):e.$message({type:"error",message:"账号或密码错误",showClose:!0})})})},clearAccount:function(){var t=this;sessionStorage.clear(),this.$emit("state"),this.$axios.interceptors.request.use(function(e){return null!=t.token&&"/user/login"!=e.url&&(e.data=g.a.stringify(u()({},e.data)),e.params=u()({},e.params),e.headers.ylhsAccessToken=t.token),"post"===e.method&&(e.headers["Content-Type"]="application/x-www-form-urlencoded"),e},function(t){return s.a.reject(t)})}}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"main_login"},[i("div",{staticClass:"title"},[t._v("登 录")]),t._v(" "),i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-form",{ref:"loginForm",attrs:{rules:t.rules,model:t.loginForm}},[i("el-form-item",{attrs:{prop:"account"}},[i("el-input",{attrs:{icon:"el-icon-search",placeholder:"请输入用户名"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("loginForm")}},model:{value:t.loginForm.account,callback:function(e){t.$set(t.loginForm,"account",e)},expression:"loginForm.account"}},[i("i",{staticClass:"el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),i("el-form-item",{attrs:{prop:"password"}},[i("el-input",{attrs:{placeholder:"请输入密码","show-password":""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login("loginForm")}},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}},[i("i",{staticClass:"el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),i("el-form-item",[i("el-button",{staticStyle:{"text-align":"center",width:"150px"},attrs:{type:"primary",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.login("loginForm")}}},[t._v(t._s(t.messagesStr))])],1)],1)],1)],1)])},staticRenderFns:[]};var b=i("VU/8")(v,w,!1,function(t){i("s4Wl")},"data-v-091e23bb",null).exports,y={name:"Base",data:function(){return{showname:!1,username:"",administrator:!1}},methods:{toIndex:function(){this.$router.push({path:"/home"})},toHome:function(){this.$router.push({path:"/home"})},toLogin:function(){this.$router.push({path:"/login"})},toRegiste:function(){this.$router.push({path:"/register"})},toManage:function(){this.$router.push({path:"/management/user"})},state:function(){null!=sessionStorage.getItem("account")?(this.showname=!0,this.username=sessionStorage.getItem("account"),this.isUserAdmin()):this.showname=!1},handleCommand:function(t){switch(t){case"a":this.toHome();break;case"b":this.toManage();break;case"c":this.exit()}},exit:function(t){sessionStorage.clear(),this.state(),this.toLogin()},isUserAdmin:function(){var t=this;this.$axios.get("/user/currentUser").then(function(e){t.administrator=e.data.data.administrator})}},mounted:function(){}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("el-container",{staticClass:"hidden-xs-only"},[i("el-header",[i("div",{staticClass:"logo",on:{click:t.toIndex}},[i("img",{staticClass:"logoImg",attrs:{src:"/static/images/hslogo.png"}}),t._v(" "),i("span",{staticStyle:{color:"#303133"}},[t._v("华砂信息")]),t._v(" "),i("span",{staticStyle:{"font-size":"13px","margin-left":"5px",color:"#606266",height:"200px"}},[t._v("——客户信息调查系统")])]),t._v(" "),i("div",{staticStyle:{float:"right","margin-right":"50px","line-height":"60px"}},[t.showname?[i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[t._v("\n              "+t._s(t.username)),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"a"}},[t._v("问卷管理")]),t._v(" "),t.administrator?i("el-dropdown-item",{attrs:{command:"b"}},[t._v("后台管理")]):t._e(),t._v(" "),i("el-dropdown-item",{attrs:{command:"c"}},[t._v("退出登录")])],1)],1)]:[i("el-button",{staticStyle:{"font-size":"15px"},attrs:{type:"primary",plain:""},on:{click:t.toLogin}},[t._v("登录")])]],2)]),t._v(" "),i("el-main",{staticStyle:{padding:"0"}},[i("router-view",{on:{state:t.state}})],1)],1),t._v(" "),i("el-container",{staticClass:"hidden-sm-and-up"},[i("el-header",[i("div",{staticClass:"logo-xs",on:{click:t.toIndex}},[i("img",{staticClass:"logoImg",attrs:{src:"/static/images/hslogo.png"}}),t._v(" "),i("span",{staticStyle:{color:"#303133"}},[t._v("华砂信息")]),t._v(" "),i("span",{staticClass:"hidden-md-and-down",staticStyle:{"font-size":"13px","margin-left":"5px",color:"#606266",height:"200px"}},[t._v("——客户信息调查系统")])]),t._v(" "),i("div",{staticStyle:{float:"right","line-height":"60px"}},[t.showname?[i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[t._v("\n              "+t._s(t.username)),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"a"}},[t._v("问卷管理")]),t._v(" "),t.administrator?i("el-dropdown-item",{attrs:{command:"b"}},[t._v("后台管理")]):t._e(),t._v(" "),i("el-dropdown-item",{attrs:{command:"c"}},[t._v("退出登录")])],1)],1)]:[i("el-button",{staticStyle:{"font-size":"15px"},attrs:{type:"primary",plain:""},on:{click:t.toLogin}},[t._v("登录")])]],2)]),t._v(" "),i("el-main",{staticStyle:{padding:"0"}},[i("router-view",{on:{state:t.state}})],1)],1)],1)},staticRenderFns:[]};var x=i("VU/8")(y,_,!1,function(t){i("LvxR")},"data-v-2951a504",null).exports,S={data:function(){return{loading:!1,dialogShow:!1,dialogTitle:"",detail:[{answerOptionList:[]}],sn:"",title:"",desc:"",xsWidows:!1,dialogWidth:50,willAddQuestion:{paperSN:this.sn,questionType:"",mainTitle:"",subtitle:"",option:[],options:[{title:""}],sortOrder:1,isMust:!1},allType:[{value:"2",label:"单选题"},{value:"3",label:"多选题"},{value:"1",label:"填空题"}]}},methods:{init:function(t,e,i,n){this.sn=t,this.title=e,this.desc=i,this.xsWidows=n,n&&(this.dialogWidth=80),this.getQuestionList()},getQuestionList:function(){var t=this;this.detail=[],this.loading=!0,this.$axios.get("/questions/"+this.sn).then(function(e){var i=e.data.data;t.detail=i,t.detail.forEach(function(e){t.isSelectQuestionType(e.questionType)&&null!=e.options&&0!=e.options.size&&e.options.shift(),e.questionType=e.questionType.toString()}),t.loading=!1})},addQuestion:function(){0!=this.sn&&null!=this.sn?(this.dialogTitle="添加题目",this.willAddQuestion={paperSN:this.sn,questionType:"",mainTitle:"",option:[],options:[{title:""}],sortOrder:1,isMust:!1},this.willAddQuestion.sortOrder=this.detail.length+1,this.dialogShow=!0):this.$message({type:"error",message:"请先创建问卷!"})},deleteQuestion:function(t){var e=this;this.$confirm("确定删除此题目?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.delete("/questions/"+e.detail[t].sn).then(function(i){console.log(i),200==i.data.code?(e.detail.splice(t,1),e.$message({type:"success",message:"删除成功!"})):e.$message({type:"error",message:i.msg})})})},checkAddQuestion:function(){var t=this,e={};(e={questionType:this.willAddQuestion.questionType,mainTitle:this.willAddQuestion.mainTitle,options:this.willAddQuestion.options,sortOrder:this.sortOrder,isMust:this.willAddQuestion.isMust}).radioValue=-1,e.checkboxValue=[],e.textValue="",2!=this.willAddQuestion.questionType&&3!=this.willAddQuestion.questionType||(this.willAddQuestion.option="",this.willAddQuestion.options.forEach(function(e){t.willAddQuestion.option=t.willAddQuestion.option+"|"+e.title,console.log(t.willAddQuestion.option)})),this.willAddQuestion.paperSN=this.sn,this.$axios.post("/questions",this.willAddQuestion).then(function(i){e.id=i.data.code,200==i.data.code?(t.dialogShow=!1,t.$message({type:"success",message:"保存成功!"}),t.getQuestionList()):(t.dialogShow=!1,t.$message({type:"error",message:"添加失败! 请重新尝试。"}))})},editorQuestion:function(t){this.willAddQuestion.mainTitle=t.mainTitle,this.willAddQuestion.subtitle=t.subtitle,this.willAddQuestion.questionType=t.questionType,this.isSelectQuestionType(t.questionType)&&(this.willAddQuestion.options=t.options.map(function(t){return{title:t}})),this.willAddQuestion.sn=t.sn,this.willAddQuestion.isMust=t.isMust,this.willAddQuestion.sn=t.sn,this.dialogTitle="编辑问题",this.dialogShow=!0},addOption:function(){this.willAddQuestion.options.push({title:""})},deleteOption:function(t){this.willAddQuestion.options.splice(t,1)},typeChange:function(t){console.log(t),this.willAddQuestion.questionType=t,this.willAddQuestion.options=[{}]},isSelectQuestionType:function(t){return 2==t||3==t},upQuestionSourt:function(t){this.alertQuestionSourt(2,t)},downQuestionSourt:function(t){this.alertQuestionSourt(1,t)},alertQuestionSourt:function(t,e){var i=this;this.$axios.post("/questions/sortOrder/"+t+"/"+e.paperSN+"/"+e.sn).then(function(t){i.getQuestionList()})}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"Design",attrs:{"element-loading-text":"加载中..."}},[i("h3",[t._v(t._s(t.title))]),t._v(" "),""!=t.desc?i("div",{staticClass:"top"},[t._v("\n    "+t._s(t.desc)+"\n  ")]):t._e(),t._v(" "),t._l(t.detail,function(e,n){return i("el-card",{key:n,staticClass:"box-card",staticStyle:{margin:"10px"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"questionTitle"},[i("span",{staticStyle:{color:"#F56C6C"}},[e.isMust?i("span",[t._v("*")]):i("span",[t._v(" ")])]),t._v(" "),i("span",{staticStyle:{color:"black","margin-right":"3px"}},[t._v(t._s(n+1+"."))]),t._v("\n        "+t._s(e.mainTitle)+"\n        "),i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(e.subtitle))])],1),t._v(" "),i("div",{staticStyle:{float:"right"}},[n+1!=t.detail.length?i("el-button",{staticStyle:{padding:"2px"},attrs:{icon:"el-icon-sort-down ",type:"text"},on:{click:function(i){return t.downQuestionSourt(e)}}}):t._e(),t._v(" "),1!=e.sortOrder?i("el-button",{staticStyle:{padding:"2px",color:"#F56C6C"},attrs:{icon:"el-icon-sort-up",type:"text"},on:{click:function(i){return t.upQuestionSourt(e)}}}):t._e(),t._v(" "),i("el-button",{staticStyle:{padding:"2px"},attrs:{type:"text"},on:{click:function(i){return t.editorQuestion(e)}}},[t._v("编辑")]),t._v(" "),i("el-button",{staticStyle:{padding:"2px",color:"#F56C6C"},attrs:{type:"text"},on:{click:function(e){return t.deleteQuestion(n)}}},[t._v("删除")])],1)]),t._v(" "),t._l(e.options,function(n,s){return i("div",{key:s,staticClass:"text item"},["2"==e.questionType?i("div",[i("el-radio",{staticStyle:{margin:"5px"},attrs:{label:s},model:{value:e.radioValue,callback:function(i){t.$set(e,"radioValue",i)},expression:"item.radioValue"}},[t._v(t._s(n))])],1):t._e()])}),t._v(" "),"3"==e.questionType?i("el-checkbox-group",{model:{value:e.answerOptionList,callback:function(i){t.$set(e,"answerOptionList",i)},expression:"item.answerOptionList"}},t._l(e.options,function(e,n){return i("div",{key:n,staticClass:"text item"},[i("el-checkbox",{staticStyle:{margin:"5px"},attrs:{label:n}},[t._v(t._s(e))])],1)}),0):t._e(),t._v(" "),"1"==e.questionType?i("el-input",{attrs:{type:"textarea",resize:"none"},model:{value:e.textValue,callback:function(i){t.$set(e,"textValue",i)},expression:"item.textValue"}}):t._e()],2)}),t._v(" "),i("el-button",{staticStyle:{"margin-top":"10px"},attrs:{icon:"el-icon-circle-plus"},on:{click:t.addQuestion}},[t._v("添加题目")]),t._v(" "),i("br"),i("br"),i("br"),i("br"),i("br"),t._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:t.dialogTitle,visible:t.dialogShow,"close-on-click-modal":!1,width:this.dialogWidth+"%"},on:{"update:visible":function(e){t.dialogShow=e}}},[i("el-form",{ref:"form",attrs:{model:t.willAddQuestion,"label-width":"80px"}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"题目类型"}},[i("el-select",{attrs:{placeholder:"请选择题目类型"},on:{change:t.typeChange},model:{value:t.willAddQuestion.questionType,callback:function(e){t.$set(t.willAddQuestion,"questionType",e)},expression:"willAddQuestion.questionType"}},t._l(t.allType,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"是否必填"}},[i("el-checkbox",{model:{value:t.willAddQuestion.isMust,callback:function(e){t.$set(t.willAddQuestion,"isMust",e)},expression:"willAddQuestion.isMust"}},[t._v("必填")])],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"题目标题"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:t.willAddQuestion.mainTitle,callback:function(e){t.$set(t.willAddQuestion,"mainTitle",e)},expression:"willAddQuestion.mainTitle"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"副标题"}},[i("el-input",{attrs:{placeholder:"请输入副标题"},model:{value:t.willAddQuestion.subtitle,callback:function(e){t.$set(t.willAddQuestion,"subtitle",e)},expression:"willAddQuestion.subtitle"}})],1),t._v(" "),"2"==t.willAddQuestion.questionType||"3"==t.willAddQuestion.questionType?[t._l(t.willAddQuestion.options,function(e,n){return i("el-form-item",{key:n,attrs:{label:"选项"+(n+1)}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"请输入选项名"},model:{value:e.title,callback:function(i){t.$set(e,"title",i)},expression:"item.title"}})],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){return t.deleteOption(n)}}},[t._v("删除选项")])],1)],1)],1)}),t._v(" "),i("el-button",{staticClass:"addOptionButton",attrs:{type:"primary",plain:""},on:{click:t.addOption}},[t._v("新增选项")])]:t._e(),t._v(" "),"1"==t.willAddQuestion.questionType?[i("el-form-item",{attrs:{label:"填空"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",resize:"none"}})],1)]:t._e()],2),t._v(" "),i("br"),t._v(" "),i("div",{staticStyle:{width:"100%","text-align":"right"}},[i("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.dialogShow=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.checkAddQuestion}},[t._v("完成")])],1)],1)],2)},staticRenderFns:[]};var T=i("VU/8")(S,k,!1,function(t){i("NPWD")},"data-v-3bf7f0a0",null).exports,C=i("Pg0u"),$=i.n(C),q={data:function(){return{dialogTableVisible:!1,visible:[],loading:!1,detail:[],currentPage:1,pageSize:10,total:0,tableData:[],paperSn:"",exportExcelLoading:!1,answerText2ExcelQeustionId:0,dialogWidth:50,paperTitle:""}},mounted:function(){this.dataAnalysis()},methods:{answerText2Excel:function(t){this.$alert("正在开发...","提示")},exportPdf:function(){this.$alert("正在开发...","提示")},analysisExportExcel:function(){var t=this;this.$axios({method:"GET",url:"/excel/answer/"+this.paperSn,responseType:"blob"}).then(function(e){var i=document.createElement("a"),n=new Blob([e.data],{type:"application/vnd.ms-excel"});i.style.display="none",i.href=URL.createObjectURL(n),i.download=t.paperTitle,document.body.appendChild(i),i.click()}).catch(function(t){console.log(t)})},getTableData:function(){var t=this;({opera_type:"get_text_answer_detail",questionId:this.questionId,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(e){console.log(e),t.tableData=e.detail,t.total=e.total})},sizeChange:function(){this.getTableData()},currentChange:function(){this.getTableData()},lookTextDetail:function(t){this.tableData=[],this.pageSize=10,this.total=0,this.currentPage=1,this.dialogTableVisible=!0,this.questionId=t,this.getTableData()},changeValue:function(t,e){this.$set(this.visible,t,e),console.log("num="+t),console.log("value="+e),1==e?this.setImg(t):2==e?this.setPar(t):3==e?this.setRing(t):4==e&&this.setTz(t)},dataAnalysis:function(t,e,i){var n=this;e&&(this.dialogWidth=80),this.paperTitle=i,this.loading=!0,this.detail=[],this.paperSn=t,this.$axios("/questions/answer/"+this.paperSn).then(function(t){n.detail=t.data.data,0!==n.detail.length&&n.detail.forEach(function(t){if(3==t.questionType){var e=0;t.result.forEach(function(t){e+=t.count}),t.result.forEach(function(t){t.percent=t.count/e*100||0})}}),n.visible=[],n.loading=!1}),this.dialogShow=!1},setImg:function(t){console.log(t),console.log(this.detail[t].result);var e=$.a.init(document.getElementById("img"+t)),i={tooltip:{},legend:{data:["数量"]},dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},xAxis:{type:"category"},yAxis:{},series:[{name:"数量：",type:"bar",barWidth:30,color:"deepskyblue"}]};e.setOption(i)},setPar:function(t){var e=$.a.init(document.getElementById("bing"+t)),i={tooltip:{},color:["#409EFF","#FFB54D","#FF7466","#44DB5E"],legend:{data:["数量"]},dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},series:[{name:"统计结果：",type:"pie",radius:"55%",center:["50%","50%"],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};e.setOption(i)},setRing:function(t){var e=$.a.init(document.getElementById("ring"+t)),i={tooltip:{},legend:{},color:["#409EFF","#FFB54D","#FF7466","#44DB5E"],dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},series:[{name:"数量：",type:"pie",radius:["50%","70%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}}}]};e.setOption(i)},setTz:function(t){var e=$.a.init(document.getElementById("tz"+t)),i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},dataset:{dimensions:["option","count","percent"],source:this.detail[t].result},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",boundaryGap:[0,.01]},yAxis:{type:"category"},series:[{name:"数量：",type:"bar",barWidth:30,color:"#409EFF"}]};e.setOption(i)},setText:function(t){return{resule:this.detail[t].result}},isSelectQuestionType:function(t){return 2==t||3==t}}},A={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"Count",attrs:{id:"pdfDom","element-loading-text":"生成中..."}},[0!=t.detail.length?i("div",{staticClass:"opera-buttons"},[i("el-button",{attrs:{type:"primary",size:"mini",loading:t.exportExcelLoading},nativeOn:{click:function(e){return t.analysisExportExcel(e)}}},[t._v("导出excel")])],1):t._e(),t._v(" "),0==t.detail.length?i("div",[t._v("暂时没有数据")]):t._e(),t._v(" "),t._l(t.detail,function(e,n){return i("el-card",{key:n,staticClass:"question"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(n+1+"."+e.mainTitle))])]),t._v(" "),"2"==e.questionType||"3"==e.questionType?i("div",[i("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{size:"small",data:e.result,stripe:""}},[i("el-table-column",{attrs:{prop:"option",label:"选项"}}),t._v(" "),i("el-table-column",{attrs:{prop:"count",label:"数量",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"percent",label:"占比%",width:"180"}})],1),t._v(" "),i("br"),t._v(" "),i("el-button",{staticClass:"hidden-sm-and-down",attrs:{size:"mini",type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(n,1)}}},[t._v("柱状图")]),t._v(" "),i("el-button",{staticClass:"hidden-sm-and-down",attrs:{size:"mini",type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(n,2)}}},[t._v("饼状图")]),t._v(" "),i("el-button",{staticClass:"hidden-sm-and-down",attrs:{size:"mini",type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(n,3)}}},[t._v("圆环图")]),t._v(" "),i("el-button",{staticClass:"hidden-sm-and-down",attrs:{size:"mini",type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(n,4)}}},[t._v("条形图")]),t._v(" "),i("el-button",{staticClass:"hidden-sm-and-down",attrs:{size:"mini",type:"primary",plain:""},nativeOn:{click:function(e){return t.changeValue(n,0)}}},[t._v("隐藏图表")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.visible[n],expression:"visible[index] == 1"}],staticClass:"img",attrs:{id:"img"+n}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==t.visible[n],expression:"visible[index] == 2"}],staticClass:"bing",attrs:{id:"bing"+n}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.visible[n],expression:"visible[index] == 3"}],staticClass:"ring",attrs:{id:"ring"+n}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:4==t.visible[n],expression:"visible[index] == 4"}],staticClass:"tz",attrs:{id:"tz"+n}})],1):t._e(),t._v(" "),"1"==e.questionType?i("div",[i("el-table",{attrs:{data:e.answerList}},[i("el-table-column",{attrs:{property:"answerOption",label:"回答结果"}})],1)],1):t._e()])})],2)},staticRenderFns:[]};var L=i("VU/8")(q,A,!1,function(t){i("I6+s")},"data-v-30642365",null).exports,Q={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?i("i",{staticClass:"el-icon-loading"}):t._e(),t._v(" "),t.icon&&!t.loading?i("i",{class:t.icon}):t._e(),t._v(" "),t.$slots.default?i("span",[t._t("default")],2):t._e()])},staticRenderFns:[]},F=i("VU/8")(Q,z,!1,null,null,null).exports,W=i("71e1"),D=i.n(W),O={components:{ElButton:F,Design:T,QRCode:D.a,DataShow:L},data:function(){return{defaultActive:1,formTitle:"添加问卷",activeName:"wjsj",wjList:[],loading:!1,dialogShow:!1,shareDialogShow:!1,tempDialog:!1,tempData:[],tempDataCount:0,tempLoading:!1,tempSearchText:"",willAddWj:{sn:"",queTitle:"",queDescribe:"感谢您能抽时间参与本次问卷，您的意见和建议就是我们前行的动力！"},shareInfo:{url:""},xsLeftSpan:0,xsRightSpan:24,xsWidows:!1,dialogHeight:70,dialogWidth:50}},mounted:function(){this.getWjList()},computed:{nowSelect:function(){var t=this.wjList[this.defaultActive-1];return 0==this.wjList.length?{sn:null,queTitle:null,queDescribe:null,queStatus:null}:{sn:t.sn,queTitle:t.queTitle,queDescribe:t.queDescribe,queStatus:t.queStatus}}},methods:{addTemp:function(){this.$axios({opera_type:"add_temp",wjId:107}).then(function(t){console.log(t)})},useTemp:function(t){var e=this;this.tempLoading=!0,this.$axios({opera_type:"use_temp",wjId:t.tempid}).then(function(t){console.log(t),e.tempLoading=!1,e.$message({type:"success",message:"使用模板成功！",showClose:!0}),e.tempDialog=!1,e.dialogShow=!1,e.getWjList()})},openTemp:function(){this.tempDialog=!0,this.changeTempPage(1),this.getTempWjList()},changeTempPage:function(t){var e=this;this.tempLoading=!0,this.$axios({opera_type:"get_temp_wj_list",page:t}).then(function(t){e.tempDataCount=t.count,e.tempData=t.detail,e.tempLoading=!1})},lookTempWj:function(t){var e=window.location.origin+"/tempdisplay/"+t.tempid;window.open(e)},pushWj:function(){var t=this;this.$axios.post("/papers/state/"+this.nowSelect.sn).then(function(e){console.log(e),200==e.data.code?(t.$message({type:"success",message:0==t.nowSelect.queStatus?"问卷发布成功！":"问卷暂停成功！"}),t.getWjList()):t.$message({type:"error",message:e.msg})})},shareWj:function(){0!=this.nowSelect.queStatus?(this.shareInfo.url=window.location.origin+"/dom/#/display/"+this.nowSelect.sn,this.shareDialogShow=!0):this.$message({type:"error",message:"请先发布问卷能分享！"})},makeQrcode:function(){var t=document.getElementById("canvas");D.a.toCanvas(t,this.shareInfo.url)},copySuccess:function(t){console.log(t),this.$message({type:"success",message:"已复制链接到剪切板"})},copyError:function(t){console.log(t),this.$message({type:"error",message:"复制失败"})},openShareUrl:function(){window.open(this.shareInfo.url)},previewWj:function(){var t=window.location.origin+"/dom/#/display/"+this.nowSelect.sn;window.open(t)},editWj:function(){this.formTitle="编辑问卷",this.dialogShow=!0,this.willAddWj=this.nowSelect},addWjButtonClick:function(){this.formTitle="添加问卷",this.dialogShow=!0,this.willAddWj={queTitle:"",queDescribe:"感谢您能抽时间参与本次问卷，您的意见和建议就是我们前行的动力！"}},addWj:function(){var t=this;""!=this.willAddWj.queTitle?(this.$axios.post("/papers",this.willAddWj).then(function(e){200==e.data.code?(t.$message({type:"success",message:"保存成功!"}),t.getWjList()):t.$message({type:"error",message:"保存失败!"})}),this.dialogShow=!1):this.$message({type:"error",message:"标题不能为空"})},getWjList:function(){var t=this;this.loading=!0,this.$axios.get("/papers").then(function(e){t.wjList=e.data.data,t.loading=!1,t.lookDetail()})},deleteWj:function(){var t=this;this.$confirm("确定删除"+this.nowSelect.queTitle+"? 删除后不可恢复！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,t.$axios.delete("/papers/"+t.nowSelect.sn).then(function(e){200==e.data.code?(t.$message({type:"success",message:"删除成功!"}),t.loading=!1,t.getWjList(),t.defaultActive=1):t.$message({type:"error",message:data.msg})})})},wjClick:function(t,e){this.defaultActive=(e+1).toString(),this.xsWidows&&this.closeRightCol(),this.lookDetail()},lookDetail:function(){this.$refs.design.init(this.nowSelect.sn,this.nowSelect.queTitle,this.nowSelect.queDescribe,this.xsWidows),this.$refs.dataShow.dataAnalysis(this.nowSelect.sn,this.xsWidows,this.nowSelect.queTitle)},openLeftCol:function(t,e){if("openLeftCol"==t)return this.xsWidows=!0,this.dialogWidth=80,this.xsLeftSpan=20,this.xsRightSpan=4,!1},closeRightCol:function(){this.xsLeftSpan=0,this.xsRightSpan=24,this.xsWidows=!0,this.dialogWidth=80}}},E={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("el-row",[i("el-col",{attrs:{xs:t.xsLeftSpan,sm:{span:3},md:{span:4},lg:{span:5},xl:{span:6}}},[i("div",{staticClass:"opera"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"创建问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-plus",type:"text"},on:{click:t.addWjButtonClick}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-edit",type:"text",disabled:null==t.nowSelect.sn},on:{click:t.editWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:0==t.nowSelect.queStatus?"发布问卷":"暂停问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:0==t.nowSelect.queStatus?"el-icon-video-play":"el-icon-video-pause",type:"text",disabled:null==t.nowSelect.sn},on:{click:t.pushWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"预览问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-view",type:"text",disabled:null==t.nowSelect.sn},on:{click:t.previewWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-delete",type:"text",disabled:null==t.nowSelect.sn},on:{click:t.deleteWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分享问卷",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",attrs:{icon:"el-icon-share",type:"text",disabled:null==t.nowSelect.sn},on:{click:t.shareWj}})],1),t._v(" "),i("el-tooltip",{staticClass:"item hidden-sm-and-up",staticStyle:{"margin-right":"5px","margin-left":"50px"},attrs:{effect:"dark",content:"折叠",placement:"bottom"}},[i("el-button",{staticClass:"rightButton",staticStyle:{"font-weight":"bold",color:"rgb(1,171,158)"},attrs:{icon:"el-icon-d-arrow-left",type:"text"},on:{click:t.closeRightCol}})],1)],1),t._v(" "),i("el-menu",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"menu",attrs:{"default-active":t.defaultActive.toString()}},[null==t.nowSelect.sn?i("div",{staticStyle:{width:"100%","text-align":"center","font-size":"15px","line-height":"20px","margin-top":"20px",color:"#303133"}},[t._v("\n          点击上方 + 创建第一个问卷\n        ")]):t._e(),t._v(" "),t._l(t.wjList,function(e,n){return i("el-menu-item",{key:(n+1).toString(),attrs:{index:(n+1).toString()},on:{click:function(i){return t.wjClick(e.sn,n)}}},[i("i",{staticClass:"el-icon-tickets"}),t._v(" "),i("span",{staticStyle:{display:"inline-block"},attrs:{slot:"title"},slot:"title"},[t._v("\n            "+t._s(e.queTitle)+"\n            "),0==e.queStatus?i("span",{staticStyle:{color:"#F56C6C","font-size":"13px"}},[i("i",{staticClass:"el-icon-link",staticStyle:{margin:"0","font-size":"13px",color:"#F56C6C",width:"10px"}}),t._v("\n              未发布\n            ")]):t._e(),t._v(" "),1==e.queStatus?i("span",{staticStyle:{color:"#67C23A","font-size":"13px"}},[i("i",{staticClass:"el-icon-link",staticStyle:{margin:"0","font-size":"13px",color:"#67C23A",width:"10px"}}),t._v("\n              已发布\n            ")]):t._e()])])})],2)],1),t._v(" "),i("el-col",{attrs:{xs:t.xsRightSpan,sm:{span:21},md:{span:20},lg:{span:19},xl:{span:18}}},[i("el-tabs",{attrs:{type:"border-card","before-leave":t.openLeftCol},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{staticClass:"hidden-sm-and-up",attrs:{name:"openLeftCol"}},[i("span",{staticStyle:{padding:"8px"},attrs:{slot:"label"},slot:"label"},[i("div",{staticClass:"el-icon-d-arrow-right hidden-sm-and-up",staticStyle:{"font-weight":"bold",color:"rgb(1,171,158)"}})])]),t._v(" "),i("el-tab-pane",{attrs:{label:"问卷设计",name:"wjsj"}},[i("div",{staticClass:"content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.nowSelect.sn||null==t.nowSelect.sn,expression:"nowSelect.sn == 0 || nowSelect.sn == null"}]},[t._v("\n              请先选择问卷\n            ")]),t._v(" "),i("design",{directives:[{name:"show",rawName:"v-show",value:null!=t.nowSelect.sn,expression:"nowSelect.sn != null"}],ref:"design"})],1)]),t._v(" "),i("el-tab-pane",{attrs:{label:"回答统计",name:"hdtj"}},[i("div",{ref:"pdf",staticClass:"content"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.nowSelect.sn||null==t.nowSelect.sn,expression:"nowSelect.sn == 0 || nowSelect.sn == null"}]},[t._v("\n              请先选择问卷\n            ")]),t._v(" "),i("data-show",{directives:[{name:"show",rawName:"v-show",value:null!=t.nowSelect.sn,expression:"nowSelect.sn != null"}],ref:"dataShow"})],1)])],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:t.formTitle,visible:t.dialogShow,"close-on-click-modal":!1,width:this.dialogWidth+"%"},on:{"update:visible":function(e){t.dialogShow=e}}},[i("el-form",{ref:"willAddWj",attrs:{model:t.willAddWj}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷标题",required:""}},[i("el-input",{attrs:{placeholder:"请输入问卷标题"},model:{value:t.willAddWj.queTitle,callback:function(e){t.$set(t.willAddWj,"queTitle",e)},expression:"willAddWj.queTitle"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷描述"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入问卷描述",rows:"5"},model:{value:t.willAddWj.queDescribe,callback:function(e){t.$set(t.willAddWj,"queDescribe",e)},expression:"willAddWj.queDescribe"}})],1)],1),t._v(" "),i("div",{staticStyle:{width:"100%","text-align":"right"}},[i("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.dialogShow=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.addWj}},[t._v("确定")])],1)],1),t._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"模板库",visible:t.tempDialog,"close-on-click-modal":!1,width:this.dialogWidth+"%"},on:{"update:visible":function(e){t.tempDialog=e}}},[i("el-input",{attrs:{placeholder:"请输入关键词搜索","prefix-icon":"el-icon-search"},model:{value:t.tempSearchText,callback:function(e){t.tempSearchText=e},expression:"tempSearchText"}}),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tempLoading,expression:"tempLoading"}],staticStyle:{width:"100%"},attrs:{data:t.tempData,"element-loading-text":"加载中..."}},[i("el-table-column",{attrs:{prop:"tempname",label:"模板名",width:"250"}}),t._v(" "),i("el-table-column",{attrs:{prop:"username",label:"创建者"}}),t._v(" "),i("el-table-column",{attrs:{label:"预览"},scopedSlots:t._u([{key:"default",fn:function(e){return i("el-link",{attrs:{type:"primary"},on:{click:function(i){return t.lookTempWj(e.row)}}},[t._v("预览")])}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return i("el-link",{attrs:{type:"primary"},on:{click:function(i){return t.useTemp(e.row)}}},[t._v("使用此模板")])}}])})],1),t._v(" "),i("el-pagination",{attrs:{layout:"prev, pager, next",total:t.tempDataCount,"page-size":5},on:{"current-change":t.changeTempPage}})],1),t._v(" "),i("el-dialog",{staticClass:"dialog",attrs:{title:"分享问卷",visible:t.shareDialogShow,"close-on-click-modal":!0,width:this.dialogWidth+"%"},on:{"update:visible":function(e){t.shareDialogShow=e},opened:t.makeQrcode}},[i("el-form",{ref:"form",attrs:{model:t.shareInfo}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"问卷链接"}},[i("el-row",[i("el-col",{attrs:{xs:{span:24},sm:{span:16},md:{span:16},lg:{span:16},xl:{span:16}}},[i("el-input",{attrs:{readonly:""},model:{value:t.shareInfo.url,callback:function(e){t.$set(t.shareInfo,"url",e)},expression:"shareInfo.url"}})],1),t._v(" "),i("el-col",{attrs:{xs:{span:24},sm:{span:8},md:{span:8},lg:{span:8},xl:{span:8}}},[i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shareInfo.url,expression:"shareInfo.url",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.copyError,expression:"copyError",arg:"error"}],staticStyle:{"margin-left":"5px"}},[t._v("复制")]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"5px"},on:{click:t.openShareUrl}},[t._v("打开")])],1)],1)],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"二维码"}},[i("canvas",{staticStyle:{width:"150px",height:"150px"},attrs:{id:"canvas"}})])],1)],1)],1)},staticRenderFns:[]};var j=i("VU/8")(O,E,!1,function(t){i("hgRQ")},"data-v-3ce593d2",null).exports,R={data:function(){return{dialogShow:!1,dialogTitle:"",dialogType:1,oldItem:null,willAddQuestion:{paperSN:this.sn,questionType:"",mainTitle:"",subtitle:"",option:[],options:[{title:""}],sortOrder:1,isMust:!1},allType:[{value:"2",label:"单选题"},{value:"3",label:"多选题"},{value:"1",label:"填空题"}],sn:"",title:"",desc:"",detail:[],startTimestamp:0,submitLoading:!1,submitText:"提交"}},rules:{text:[{required:!0,message:"请输入!!!",trigger:"blur"}]},mounted:function(){var t=this,e=this.$route.params.sn;this.$axios.get("/papers/"+e).then(function(e){var i=e.data;200==i.code?(t.title=i.data.queTitle,t.desc=i.data.queDescribe,t.detail=i.data.queQuestionEntities,t.detail.forEach(function(e){t.isSelectQuestionType(e.questionType)&&null!=e.options.length&&0!=e.options.length&&(e.options.shift(),t.$set(e,"answerOptionList",[])),t.$set(t.detail,e.mainTitle,!0),t.detail[e.mainTitle]=[{v:""}]}),document.title=i.data.queTitle):t.$message({type:"error",message:"获取失败，请重试"})}),this.startTimestamp=(new Date).getTime()},methods:{submit:function(){var t=this,e=!1;if(this.detail.forEach(function(i){void 0===i.answerOption&&i.isMust&&(e=!0,t.$message({type:"error",message:i.mainTitle+"必须填写"}))}),!e){this.submitLoading=!0,this.submitText="提交中";var i=this.$route.params.sn,n=parseInt(((new Date).getTime()-this.startTimestamp)/1e3),s=[];this.detail.forEach(function(t){3==t.questionType&&(t.answerOption="",t.answerOptionList.forEach(function(e){t.answerOption=t.answerOption+"| "+e})),s.push({questionTitle:t.mainTitle,paperSN:t.paperSN,questionSN:t.sn,answerOption:t.answerOption})}),s.push({questionTitle:"填写用时",paperSN:i,questionSN:"useTime",answerOption:n}),this.$axios.post("/answers",s).then(function(e){console.log(e),200==e.data.code?(t.submitLoading=!1,t.submitText="提交",t.$router.push({path:"/thankyou"})):(t.submitLoading=!1,t.submitText="提交",t.$notify.error({title:"错误",message:e.msg}))})}},isSelectQuestionType:function(t){return 2==t||3==t},getVx:function(){}}},N={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"display"},[i("div",{staticClass:"content"},[i("h3",[t._v(t._s(t.title))]),t._v(" "),null!=t.desc?i("div",{staticClass:"top"},[t._v("\n      "+t._s(t.desc)+"\n    ")]):t._e(),t._v(" "),i("el-form",[t._l(t.detail,function(e,n){return i("el-card",{key:n,staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"questionTitle"},[i("span",{staticStyle:{color:"#F56C6C"}},[e.isMust?i("span",[t._v("*")]):i("span",[t._v(" ")])]),t._v("\n            "+t._s(n+1+"."+e.mainTitle)+"\n          ")]),t._v(" "),null!=e.subtitile||""!=e.subtitile?i("el-divider",{staticClass:"divider",attrs:{"content-position":"left"}},[t._v(t._s(e.subtitle))]):t._e()],1),t._v(" "),i("el-form-item",{attrs:{prop:e.isMust?e.mainTitle+"."+n+".v":"",rules:[{required:!0,message:e.mainTitle+"必须填写",trigger:"blur"}]}},[t._l(e.options,function(n,s){return i("div",{key:s,staticClass:"text item"},["2"==e.questionType?i("div",[i("el-radio",{staticStyle:{margin:"5px"},attrs:{label:n},model:{value:e.answerOption,callback:function(i){t.$set(e,"answerOption",i)},expression:"item.answerOption"}},[t._v(t._s(n))])],1):t._e()])}),t._v(" "),"3"==e.questionType?i("el-checkbox-group",{attrs:{min:e.isMust?1:0},model:{value:e.answerOptionList,callback:function(i){t.$set(e,"answerOptionList",i)},expression:"item.answerOptionList"}},t._l(e.options,function(t,e){return i("div",{key:e,staticClass:"text item"},[i("el-checkbox",{staticStyle:{margin:"5px"},attrs:{label:t+""}})],1)}),0):t._e(),t._v(" "),"1"==e.questionType?i("el-input",{attrs:{type:"text",resize:"none"},model:{value:e.answerOption,callback:function(i){t.$set(e,"answerOption",i)},expression:"item.answerOption"}}):t._e()],2)],1)}),t._v(" "),i("el-form-item",[i("el-button",{staticStyle:{margin:"5px"},attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submit}},[t._v(t._s(t.submitText))])],1)],2),t._v(" "),i("div",{staticClass:"bottom"},[i("el-link",{attrs:{type:"info",href:"http://www.huashasoft.com/index.html"}},[t._v("郑州华砂信息信息技术有限公司 提供技术支持")])],1)],1)])},staticRenderFns:[]};var U=i("VU/8")(R,N,!1,function(t){i("WgVw")},"data-v-c88e4cec",null).exports,V={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"thankYou"},[e("el-card",{staticStyle:{"font-size":"18px","line-height":"40px",padding:"10px"},attrs:{shadow:"never"}},[e("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"green","font-size":"50px"}}),e("br"),this._v("\n    您的回答已提交，感谢您的参与！"),e("br"),e("br"),this._v(" "),e("el-divider"),this._v(" "),e("el-link",{attrs:{type:"info",href:"http://www.huashasoft.com/index.html"}},[this._v("郑州华砂信息信息技术有限公司 提供技术支持")])],1)],1)},staticRenderFns:[]};var I=i("VU/8")(null,V,!1,function(t){i("TyR3"),i("Xf8l")},"data-v-1b3f2ce8",null).exports,B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[i("el-aside",{attrs:{width:"200px"}},[i("el-menu",{attrs:{router:"","default-active":"1-1"}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-user"}),t._v(" "),i("span",[t._v("用户管理")])]),t._v(" "),i("el-menu-item",{attrs:{index:"1-1",route:"/management/user"}},[t._v("账户管理")])],2),t._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-document"}),t._v(" "),i("span",[t._v("题库管理")])]),t._v(" "),i("el-menu-item",{attrs:{index:"2-1"}},[t._v("模板管理")]),t._v(" "),i("el-menu-item",{attrs:{index:"2-2"}},[t._v("问题管理")]),t._v(" "),i("el-menu-item",{attrs:{index:"2-3"}},[t._v("问题分类")])],2)],1)],1),t._v(" "),i("el-main",[i("router-view")],1)],1)},staticRenderFns:[]};var M=i("VU/8")({data:function(){return{}},methods:{}},B,!1,function(t){i("3hi2")},null,null).exports,H={data:function(){return{userList:[],queryUserList:[],queryString:"",screenHeight:window.innerHeight-220,page:1,rows:10,total:1,records:10,profile:{account:"",password:"0000",fullName:"",remarks:"",administrator:!1,sn:""},profileRules:{account:[{required:!0,message:"账户必须填写!!",trigger:"blur"}],fullName:[{required:!0,message:"姓名必须填写!!",trigger:"blur"}]},formVisible:!1,formLoading:!1,fromTitle:"新增用户"}},methods:{handleDelete:function(t,e){var i=this;this.$confirm("确认要删除此用户信息吗？","提示",{}).then(function(){i.$axios.delete("/user/"+e.sn).then(function(t){200==t.data.code?(i.$message({type:"success",message:"删除成功!"}),i.loading=!1,i.getAllUserList(),i.defaultActive=1):i.$message({type:"error",message:data.msg})})})},resetPassword:function(t,e){var i=this;this.$confirm("确认要重置密码吗？","提示",{}).then(function(){i.$axios.post("/user/resetUserPassword/"+e.sn).then(function(t){200==t.data.code?(i.$message({type:"success",message:"重置密码成功，重置密码为0000!"}),i.loading=!1,i.getAllUserList(),i.defaultActive=1):i.$message({type:"error",message:data.msg})})})},querySearch:function(t,e){this.getAllUsers();var i=this.queryUserList,n=[];(t?i.filter(this.createFilter(t)):i).forEach(function(t){n.push({value:t.fullName})}),e(n)},createFilter:function(t){return function(e){return-1!==e.fullName.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){console.log(t),this.queryString=t.value,this.getAllUserList()},getAllUserList:function(){var t=this;this.$axios.get("/user/queryGridJson",{params:{queryJson:this.queryString,page:this.page,rows:this.rows,total:this.total,records:this.records,code:""}}).then(function(e){var i=e.data.data;null!==i&&(t.userList=i.rows,t.page=i.page,t.rows=i.pagesize,t.total=i.total,t.records=i.records)})},getAllUsers:function(){var t=this;this.$axios.get("/user/queryGridJson",{params:{rows:99999}}).then(function(e){t.queryUserList=e.data.data.rows})},handleSizeChange:function(t){this.rows=t,this.getAllUserList()},handleCurrentChange:function(t){this.page=t,this.getAllUserList()},formSubmit:function(){var t=this;this.$refs.profile.validate(function(e){e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.formLoading=!0,""===t.profile.sn&&(t.profile.password=t.$md5(t.profile.password)),console.log(t.profile),t.$axios.post("/user/saveUserInfo",t.profile).then(function(e){t.formLoading=!1,200==e.data.code?(t.$message({message:"保存成功",type:"success"}),t.$refs.profile.resetFields(),t.getAllUserList()):t.$message({type:"error",message:"保存失败!"}),t.formVisible=!1})})})},addUser:function(){this.fromTitle="新增用户",this.profile={account:"",password:"0000",fullName:"",remarks:"",administrator:!1,sn:""},this.formVisible=!0},handleEdit:function(t,e){this.fromTitle="编辑用户信息",this.profile={account:e.account,fullName:e.fullName,remarks:e.remarks,administrator:e.administrator,sn:e.sn},this.formVisible=!0},changeAdministrator:function(t,e){var i=this;this.$confirm("是否确认更改当前用户的管理员状态？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){i.$axios.post("/user/adminState/"+e.sn).then(function(t){200==t.data.code?i.$message({type:"success",message:"更改管理员状态成功"}):400==t.data.code&&i.$message.error("更改管理员状态失败")})}).catch(function(){i.$message({type:"info",message:"已取消更改"}),i.getAllUserList()})},changeEnabledMark:function(t,e){var i=this;this.$confirm("是否确认更改当前用户的启用状态？","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.enabledMark?i.$axios.post("/user/enabledUser/"+e.sn).then(function(t){var e=t.data.code;200==e?i.$message({type:"success",message:"启用成功"}):400==e&&i.$message.error("启用失败")}):i.$axios.post("/user/disabledUser/"+e.sn).then(function(t){var e=t.data.code;200==e?i.$message({type:"success",message:"停用成功"}):400==e&&i.$message.error("停用失败")})}).catch(function(){i.$message({type:"info",message:"已取消更改"}),i.getAllUserList()})}},mounted:function(){var t=this;window.onresize=function(){t.screenHeight=window.innerHeight-220},this.getAllUserList()}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("el-col",{staticClass:"el-table_headtoolbar",staticStyle:{"padding-bottom":"15px"},attrs:{span:24}},[i("el-col",{attrs:{span:4,offset:20}},[i("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addUser()}}},[t._v("添加用户")])],1)],1),t._v(" "),i("el-table",{attrs:{data:t.userList,"default-sort":{prop:"date",order:"descending"},height:t.screenHeight,border:""}},[i("el-table-column",{attrs:{prop:"sn",sortable:"",label:"编号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"account",label:"账号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"fullName",label:"姓名"}}),t._v(" "),i("el-table-column",{attrs:{label:"是否为管理员"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},on:{change:function(i){return t.changeAdministrator(e.$index,e.row)}},model:{value:e.row.administrator,callback:function(i){t.$set(e.row,"administrator",i)},expression:"scope.row.administrator"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"启用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},on:{change:function(i){return t.changeEnabledMark(e.$index,e.row)}},model:{value:e.row.enabledMark,callback:function(i){t.$set(e.row,"enabledMark",i)},expression:"scope.row.enabledMark"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"right",fixed:"right",width:"300"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-autocomplete",{staticClass:"input-with-select",attrs:{size:"mini","fetch-suggestions":t.querySearch,placeholder:"输入姓名搜索","trigger-on-focus":!0,clearable:""},on:{select:t.handleSelect},model:{value:t.queryString,callback:function(e){t.queryString=e},expression:"queryString"}})]}},{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.resetPassword(e.$index,e.row)}}},[t._v("重置密码")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-col",{staticClass:"el-table_footertoolbar",attrs:{span:24}},[i("el-pagination",{staticStyle:{float:"right"},attrs:{"hide-on-single-page":!1,background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50,100],total:t.records},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.fromTitle,visible:t.formVisible,width:"25%"},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{ref:"profile",attrs:{model:t.profile,rules:t.profileRules}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"登录账户",prop:"account"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.profile.account,callback:function(e){t.$set(t.profile,"account",e)},expression:"profile.account"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"姓名",prop:"fullName"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.profile.fullName,callback:function(e){t.$set(t.profile,"fullName",e)},expression:"profile.fullName"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"是否为管理员"}},[i("el-switch",{attrs:{"active-text":"是","inactive-text":"否"},model:{value:t.profile.administrator,callback:function(e){t.$set(t.profile,"administrator",e)},expression:"profile.administrator"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注"}},[i("el-input",{model:{value:t.profile.remarks,callback:function(e){t.$set(t.profile,"remarks",e)},expression:"profile.remarks"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{width:"100%"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){t.formVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.formLoading},nativeOn:{click:function(e){return t.formSubmit()}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var J=i("VU/8")(H,P,!1,function(t){i("2hbW")},null,null).exports,G={data:function(){return{searchStr:"",screenHeight:window.innerHeight-220,fTitle:"",pagination:{roleList:[],currentPage:1,pagesize:10,total:0},gopage:{rows:10,page:1,total:0,queryJson:""},profile:{name:"",sn:"",remarks:"",unitSN:"UNIT201812030001"},profileRules:{name:[{required:!0,message:"角色名称必须填写!!",trigger:"blur"}]},formVisible:!1,formLoading:!1,fromTitle:"新增角色"}},components:{},methods:{handleDelete:function(t,e){var i=this;this.$confirm("确认要删除此角色信息吗？","提示",{}).then(function(){i.$axios.delete("/Role/"+e.sn).then(function(t){200==t.data.code?(i.$message({type:"success",message:"删除成功!"}),i.loading=!1,i.getAllRoleList(),i.defaultActive=1):i.$message({type:"error",message:data.msg})})})},searchRole:function(t){this.$forceUpdate(),console.log(this.gopage.queryJson+"搜索"),this.getAllRoleList()},getAllRoleList:function(t,e){var i=this;this.$axios.get("/Role/queryGridJson",this.gopage).then(function(t){i.pagination.roleList=t.data.data.rows,i.pagination.total=t.data.data.records,i.pagination.currentPage=t.data.data.page,i.pagination.pagesize=t.data.data.pagesize})},enabledMarkFormat:function(t,e){return!0===t.enabledMark?"启用":"未启用"},handleSizeChange:function(t){this.$confirm("确认提交吗？"+t,"提示",{}),console.log(t),this.gopage.rows=t,this.getAllRoleList()},handleCurrentChange:function(t){this.$confirm("确认提交吗？"+t,"提示",{}),this.gopage.page=t,this.getAllRoleList()},formSubmit:function(){var t=this;this.$refs.profile.validate(function(e){console.log(e),e&&t.$confirm("确认提交吗？","提示",{}).then(function(){t.formLoading=!0,t.$axios.post("/Role/submitForm",t.profile).then(function(e){t.formLoading=!1,200==e.data.code?(t.$message({message:"提交成功",type:"success"}),t.$refs.profile.resetFields(),t.getAllRoleList()):t.$message({type:"error",message:"创建失败!"}),t.formVisible=!1})})})},addRoles:function(t){this.fromTitle=t,this.profile.name=null,this.profile.remarks=null,this.profile.sn=null,this.formVisible=!0},updateRoles:function(t,e){this.fromTitle=t,this.profile.name=e.name,this.profile.remarks=e.remarks,this.profile.sn=e.sn,this.formVisible=!0}},addUsers:function(){},mounted:function(){var t=this;window.onresize=function(){t.screenHeight=window.innerHeight-220},this.getAllRoleList()}},X={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("el-col",{staticClass:"el-table_headtoolbar",staticStyle:{"padding-bottom":"15px"},attrs:{span:24}},[i("el-col",{attrs:{span:4,offset:20}},[i("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addRoles("添加角色")}}},[t._v("添加角色")])],1)],1),t._v(" "),i("el-table",{attrs:{data:t.pagination.roleList,"default-sort":{prop:"date",order:"descending"},height:t.screenHeight,border:""}},[i("el-table-column",{attrs:{prop:"sn",sortable:"",label:"编号",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"角色名称",width:"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"unitFullName",label:"机构全称",width:"280"}}),t._v(" "),i("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),t._v(" "),i("el-table-column",{attrs:{prop:"enabledMark",label:"启用状态",formatter:t.enabledMarkFormat,width:"100"}}),t._v(" "),i("el-table-column",{attrs:{align:"right",fixed:"right",width:"200"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},on:{input:function(i){return t.searchRole(e)}},model:{value:t.queryJson,callback:function(e){t.queryJson=e},expression:"queryJson"}})]}},{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.updateRoles("编辑角色信息",e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("el-col",{staticClass:"el-table_footertoolbar",attrs:{span:24}},[i("el-pagination",{staticStyle:{float:"right"},attrs:{"hide-on-single-page":!1,background:"",layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50,100],"page-size":t.pagination.pagesize,total:t.pagination.total},on:{"size-change":function(e){return t.handleSizeChange(e)},"current-change":function(e){return t.handleCurrentChange(e)}}})],1),t._v(" "),i("el-dialog",{attrs:{title:t.fromTitle,visible:t.formVisible},on:{"update:visible":function(e){t.formVisible=e}}},[i("el-form",{ref:"profile",attrs:{model:t.profile,"label-width":"80px",rules:t.profileRules}},[i("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.profile.name,callback:function(e){t.$set(t.profile,"name",e)},expression:"profile.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[i("el-input",{model:{value:t.profile.remarks,callback:function(e){t.$set(t.profile,"remarks",e)},expression:"profile.remarks"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(e){t.formVisible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.formLoading},nativeOn:{click:function(e){return t.formSubmit("profile")}}},[t._v("提交")])],1)],1)],1)},staticRenderFns:[]};var Y=i("VU/8")(G,X,!1,function(t){i("F+FH")},null,null).exports,Z={data:function(){return{menusData:[],screenHeight:window.innerHeight-220,windowHeight:window.innerHeight,queryJson:"",formData:{}}},mounted:function(){this.windowHeight=window.innerHeight,this.getNowWidowsHeight()},watch:{windowHeight:function(){this.changeScreenHeight()}},methods:{getMenuList:function(){this.$axios.get("/Menu/queryMenuTreeGridJson").then(function(t){})},changeScreenHeight:function(){this.screenHeight=this.windowHeight-220},addMenu:function(){},handleDelete:function(t,e){},handleEdit:function(t,e){},searchMenu:function(t){}}},K={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("el-col",{staticClass:"el-table_headtoolbar",staticStyle:{"padding-bottom":"15px"},attrs:{span:24}},[i("el-col",{attrs:{span:4,offset:20}},[i("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-plus"},on:{click:function(e){return t.addMenu()}}},[t._v("添加功能")])],1)],1),t._v(" "),i("el-table",{attrs:{data:t.menusData,height:t.screenHeight,border:""}},[i("el-table-column",{attrs:{prop:"sn",sortable:"",label:"编号",width:"200"}}),t._v(" "),i("el-table-column",{attrs:{align:"right",fixed:"right",width:"200"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索",input:t.searchMenu(e)},model:{value:t.queryJson,callback:function(e){t.queryJson=e},expression:"queryJson"}})]}},{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var tt=i("VU/8")(Z,K,!1,function(t){i("Q1h7")},null,null).exports;a.default.use(r.a);var et=new r.a({mode:"history",routes:[{path:"/",name:"Base",component:x,children:[{path:"/",name:"Login",component:b},{path:"/login",name:"Login",component:b},{path:"/home",name:"Home",component:j},{path:"/management",name:"Menu",component:M,children:[{path:"/management/user",name:"User",component:J},{path:"/management/role",name:"Role",component:Y},{path:"/management/permission",name:"Permission",component:tt}]}]},{path:"/display/:sn",name:"Display",component:U},{path:"/thankyou",name:"ThankYou",component:I}]}),it=(i("sfy8"),i("tvR6"),i("wvfG")),nt=i.n(it),st=i("NC6I"),at=i.n(st),ot={install:function(t){Object.defineProperty(t.prototype,"$md5",{value:at.a})}};a.default.use(nt.a),a.default.use(p.a),a.default.use(ot),a.default.prototype.$axios=h.a,h.a.defaults.baseURL="http://crm.hserp.xin:8080/QuestionPaper-0.0.1-SNAPSHOT/",h.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",h.a.defaults.withCredentials=!0,a.default.config.productionTip=!1,h.a.interceptors.response.use(function(t){return"需要重新登陆系统"==t.data.message&&(localStorage.clear(),et.push({path:"/"})),t},function(t){return s.a.reject(t)}),new a.default({el:"#app",router:et,components:{App:l},template:"<App/>"})},NPWD:function(t,e){},Pg0u:function(t,e){t.exports=echarts},Q1h7:function(t,e){},TyR3:function(t,e){},WgVw:function(t,e){},Xf8l:function(t,e){},hgRQ:function(t,e){},s4Wl:function(t,e){},sfy8:function(t,e){},tvR6:function(t,e){}},["NHnr"]);